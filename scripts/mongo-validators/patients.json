{
  "collMod": "patients",
  "validator": {
    "$jsonSchema": {
      "bsonType": "object",
      "required": ["patientId", "summary", "createdAt", "updatedAt"],
      "properties": {
        "orgId": { "bsonType": "string" },
        "patientId": { "bsonType": "objectId" },
        "summary": { "bsonType": "object" },
        "stage": { "enum": ["1", "2", "3a", "3b", "4", "5", "5D", "Tx"] },
        "createdAt": { "bsonType": "date" },
        "updatedAt": { "bsonType": "date" }
      },
      "additionalProperties": true
    }
  },
  "validationLevel": "moderate",
  "validationAction": "error",
  "indexes": [
    {
      "key": { "orgId": 1, "updatedAt": -1 }
    },
    { "key": { "orgId": 1, "facilityId": 1, "updatedAt": -1 } },
    { "key": { "orgId": 1, "careTeamId": 1, "updatedAt": -1 } }
  ]
}
