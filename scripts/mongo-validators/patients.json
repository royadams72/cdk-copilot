{
  "collMod": "patients",
  "validator": {
    "$jsonSchema": {
      "bsonType": "object",
      "required": ["_id", "principalId", "createdAt", "updatedAt"],
      "properties": {
        "_id": { "bsonType": "objectId" },
        "principalId": { "bsonType": "string", "minLength": 6 },
        "orgId": { "bsonType": "string" },
        "summary": { "bsonType": "object" },
        "createdAt": { "bsonType": "date" },
        "updatedAt": { "bsonType": "date" }
      },
      "additionalProperties": true
    }
  },
  "validationLevel": "moderate",
  "validationAction": "error",
  "indexes": [
    {
      "key": { "principalId": 1 },
      "options": { "unique": true, "name": "uniq_principalId" }
    },
    {
      "key": { "orgId": 1, "updatedAt": -1 },
      "options": { "name": "byOrgUpdated" }
    },
    {
      "key": { "orgId": 1, "facilityId": 1, "updatedAt": -1 },
      "options": { "name": "byOrgFacilityUpdated" }
    },
    {
      "key": { "orgId": 1, "careTeamId": 1, "updatedAt": -1 },
      "options": { "name": "byOrgCareTeamUpdated" }
    }
  ]
}
