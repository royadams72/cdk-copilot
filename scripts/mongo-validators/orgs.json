{
  "collMod": "orgs",
  "validator": {
    "$jsonSchema": {
      "bsonType": "object",
      "required": [
        "slug",
        "name",
        "status",
        "createdAt",
        "updatedAt",
        "createdBy",
        "updatedBy"
      ],
      "properties": {
        "_id": { "bsonType": "objectId" },
        "slug": {
          "bsonType": "string",
          "pattern": "^[a-z0-9](?:[a-z0-9-]{1,61}[a-z0-9])$"
        },
        "aliases": {
          "bsonType": "array",
          "items": {
            "bsonType": "string",
            "pattern": "^[a-z0-9](?:[a-z0-9-]{1,61}[a-z0-9])$"
          },
          "uniqueItems": true
        },
        "name": { "bsonType": "string" },
        "status": { "enum": ["active", "suspended"] },
        "createdAt": { "bsonType": "date" },
        "updatedAt": { "bsonType": "date" },
        "createdBy": { "bsonType": "string" },
        "updatedBy": { "bsonType": "string" }
      },
      "additionalProperties": false
    }
  },
  "validationLevel": "moderate",
  "validationAction": "error",
  "indexes": [
    {
      "key": { "slug": 1 },
      "options": { "unique": true, "name": "uniq_slug" }
    },
    {
      "key": { "aliases": 1 },
      "options": { "unique": true, "sparse": true, "name": "uniq_alias" }
    },
    { "key": { "name": 1 }, "options": { "name": "byName" } },
    {
      "key": { "status": 1, "updatedAt": -1 },
      "options": { "name": "byStatus_updatedDesc" }
    }
  ]
}
